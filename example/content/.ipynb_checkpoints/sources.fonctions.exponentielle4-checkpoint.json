{"kind":"Notebook","sha256":"b698f971ca1759d66896377d820b9275c5430290ab7d1f39601b9e48e820ca0d","slug":"sources.fonctions.exponentielle4","location":"/Sources/Fonctions/02-exponentielle4.md","dependencies":[],"frontmatter":{"title":"TP : implanter la fonction exponentielle (4/5)","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"text_representation":{"extension":".md","format_name":"myst","format_version":"0.13"}},"content_includes_title":false,"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"keywords":[],"copyright":"2024-","exports":[{"format":"md","filename":"02-exponentielle4.md","url":"/02-exponentielle4-f512e0ad5dee1a800a775603455b65df.md"}]},"mdast":{"type":"root","children":[{"type":"block","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Partie 4 : calcul de l’exponentielle avec une précision relative fixée ♣","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"FSWrvM67Nd"}],"identifier":"partie-4-calcul-de-lexponentielle-avec-une-pr-cision-relative-fix-e","label":"Partie 4 : calcul de l’exponentielle avec une précision relative fixée ♣","html_id":"partie-4-calcul-de-lexponentielle-avec-une-pr-cision-relative-fix-e","implicit":true,"key":"gEHJqnX3wD"}],"data":{"nbgrader":{"grade":false,"grade_id":"cell-fd5a373907e22622","locked":true,"schema_version":3,"solution":false}},"key":"PNyOvj3jL3"},{"type":"block","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Dans la partie 2, vous avez implanté une fonction ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"az6Rk0u0L0"},{"type":"inlineCode","value":"expRang","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"O3zY3ohLRz"},{"type":"text","value":" qui\ncalcule une approximation de l’exponentielle en tronquant la somme à\nun certain rang décidé à l’avance. Cependant le rang nécessaire pour\nobtenir une bonne précision dépend du nombre réel ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"l3ZfHHOxNF"},{"type":"inlineMath","value":"x","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>","key":"na4UBQoUhY"},{"type":"text","value":" pour lequel on\nveut calculer ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"HcccX6HOtC"},{"type":"inlineMath","value":"e^x","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow><annotation encoding=\"application/x-tex\">e^x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span></span></span></span></span></span></span></span>","key":"D0oCdCkCGe"},{"type":"text","value":". On cherche maintenant à calculer une\napproximation de l’exponentielle en fixant la ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"iB1IzT1xjj"},{"type":"emphasis","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"précision","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"TJCDoWUV4v"}],"key":"XBNPbikCtK"},{"type":"text","value":" et non plus\nle rang. Pour cela on va écrire une nouvelle fonction d’approximation\nde l’exponentielle, dans laquelle le rang auquel on arrête la somme ne\nsera pas décidé à l’avance, mais dépendra de l’évolution du calcul\nqu’on est en train de faire.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"RTdE16IouO"}],"key":"WET7OTKD9O"}],"data":{"nbgrader":{"grade":false,"grade_id":"cell-0749edc234488c4e","locked":true,"schema_version":3,"solution":false}},"key":"AHZvvDcq4I"},{"type":"block","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":36,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Commencez par copier-coller dans les quatre cellules suivantes vos\nfonctions ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"hHjATKJ4aB"},{"type":"inlineCode","value":"puissance","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"S2K3EypOkM"},{"type":"text","value":" et ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"nsZvdRUnSk"},{"type":"inlineCode","value":"factorielle","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"Ep5ekFdVpP"},{"type":"text","value":" de la\n","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"tulr7Na9PG"},{"type":"link","url":"/sources/fonctions/exponentielle1","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"partie 1","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"QwyhirlZyW"}],"urlSource":"02-exponentielle1.md","dataUrl":"/sources.fonctions.exponentielle1.json","internal":true,"protocol":"file","key":"YDI1orBl6I"},{"type":"text","value":" ainsi que ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"KpSwLv8Kmc"},{"type":"inlineCode","value":"egal","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"wScrJFzh4V"},{"type":"text","value":" de la\n","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"MetmLkAuBR"},{"type":"link","url":"/sources/fonctions/exponentielle3","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"partie 3","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"xGCIcmu8Al"}],"urlSource":"02-exponentielle3.md","dataUrl":"/sources.fonctions.exponentielle3.json","internal":true,"protocol":"file","key":"zFKgrjeK6L"},{"type":"text","value":":","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"LDY95u4ahn"}],"key":"NlsGjNMBDi"}],"data":{"nbgrader":{"grade":false,"grade_id":"cell-3e4cb5925b030399","locked":true,"schema_version":3,"solution":false}},"key":"nWF6Mp2alb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"### BEGIN SOLUTION\ndef puissance( x, n):\n    r = 1\n    for i in range(n):\n        r *= x\n    return r\n### END SOLUTION","key":"EnqIc3FZxX"},{"type":"output","id":"jWQ9mDVSzLOrePaJKToEL","data":[],"key":"WcKz84M8MQ"}],"data":{},"key":"VwSFovdEH4"},{"type":"block","children":[],"key":"pvAwR2xovO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"### BEGIN SOLUTION\ndef factorielle(n):\n    r = 1\n    for i in range(1, n+1):\n        r *= i\n    return r\n### END SOLUTION","key":"yFPX8jNc5X"},{"type":"output","id":"n_tt5KOGqR_T5TiT-QVOf","data":[],"key":"qmhUEaOeGm"}],"data":{},"key":"F9gnxZki27"},{"type":"block","children":[],"key":"wqDs6NpiAV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"### BEGIN SOLUTION\ndef egal(x, y, epsilon):\n    v = abs(x-y)\n    return ((v < epsilon * abs(x)) and (v < epsilon * abs(y)))\n### END SOLUTION","key":"aOxKtsT3XL"},{"type":"output","id":"Fl0faPY6kZt1oSDIXVyDn","data":[],"key":"ZJ9w0vB7gi"}],"data":{},"key":"nFej1HJHrG"},{"type":"block","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":95,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"text","value":"Implantez une nouvelle fonction d’approximation de l’exponentielle qui\nsomme les termes ","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"mloSDewpXx"},{"type":"inlineMath","value":"\\frac{x^i}{i!}","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><msup><mi>x</mi><mi>i</mi></msup><mrow><mi>i</mi><mo stretchy=\"false\">!</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{x^i}{i!}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3705em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0255em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">!</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9021em;\"><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>","key":"mFjkrgKAwh"},{"type":"text","value":" jusqu’à ce que le prochain terme à\najouter ne modifie pas la valeur de la somme, selon la précision\ndonnée :","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"kELf7ky8HS"}],"key":"gqyvVhhXzS"}],"data":{"nbgrader":{"grade":false,"grade_id":"cell-d6b02ebdc5e27637","locked":true,"schema_version":3,"solution":false}},"key":"bBudOnCnG9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def expPrecision(x, epsilon):\n    \"\"\" Calcul de la fonction exponentielle à precision fixée\n     * Parametre x : un nombre flottant\n     * Parametre epsilon un nombre flottant\n     * Retourne e^x avec précision epsilon\n    \"\"\"\n    ### BEGIN SOLUTION\n    e1 = 0\n    e2 = 1\n    i = 1\n    while(not egal(e1,e2,epsilon)):\n        e1 = e2\n        e2 += puissance(x,i) / factorielle(i)\n        i += 1\n    return e2\n    ### END SOLUTION","key":"jS50400Njq"},{"type":"output","id":"InMdji23YfWXnJ5Fq_z35","data":[],"key":"MCJ1mJYwnF"}],"data":{},"key":"JMAeN3f6LO"},{"type":"block","children":[],"key":"oOHPia3OhR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"epsilon = 0.000000001","key":"xmqSiNwq1V"},{"type":"output","id":"Jv23zcdDtk9KVSsRFwD1_","data":[],"key":"FLDtRM5wP2"}],"data":{},"key":"JSr681LWQh"},{"type":"block","children":[],"key":"o4MoKcWOSZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"epsilon = 1e-9","key":"ydYRDkaHm2"},{"type":"output","id":"iXlhPkwMYJ-mIJzznUdlT","data":[],"key":"lwVev6JNMN"}],"data":{},"key":"p1NzPNCNDt"},{"type":"block","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"text","value":"Le calcul suivant devrait renvoyer ","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"mPuRoZ9Cx7"},{"type":"inlineMath","value":"2.718 281 828...","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2.718281828...</mn></mrow><annotation encoding=\"application/x-tex\">2.718 281 828...</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2.718281828...</span></span></span></span>","key":"r8eAR3tqtR"},{"type":"text","value":" :","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"NyF5ff9P9Z"}],"key":"Tgj9MGzLBg"}],"data":{"nbgrader":{"grade":false,"grade_id":"cell-83bc9f0ce83996e3","locked":true,"schema_version":3,"solution":false,"task":false},"tags":[]},"visibility":"show","key":"oISqW97RFS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"expPrecision(1, epsilon)","visibility":"show","key":"cuGiGa7Agy"},{"type":"output","id":"oT5KHEOjkv_bRXoCC36yV","data":[],"visibility":"show","key":"vL0fhbSpzR"}],"data":{},"key":"lfFtipY4Nr"},{"type":"block","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":162,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"text","value":"Il n’y a pas forcément suffisament de chiffres significatifs affichés\npour le vérifier. Faisons à la place un test :","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"uG5a3NMKfv"}],"key":"mpTlQ55yLN"}],"data":{"nbgrader":{"grade":false,"grade_id":"cell-76536f0d66f087bc","locked":true,"schema_version":3,"solution":false,"task":false}},"key":"CHgaYOHkcO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"assert( abs( expPrecision(1, epsilon) - 2.718281828459 ) < epsilon )","key":"fKpm3PK1pn"},{"type":"output","id":"C5Wl5dczrsVIp2flvahcN","data":[],"key":"zdjbOkhS5Z"}],"data":{},"key":"tKqIAKCuOr"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"text","value":"Notre test d’arrêt ne garantit en fait pas d’obtenir une précision de epsilon : même si le terme suivant est plus petit que epsilon, l’accumulation de tous les termes suivants pourrait largement dépasser epsilon, comme dans les exemples suivants :","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"ar1m1LCzeg"}],"key":"koz6y4I7gK"}],"key":"vtMJZrKH7n"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"assert( abs(expPrecision(3, epsilon) - 20.085536923 ) < 5*epsilon )","key":"Uop3pp5EQs"},{"type":"output","id":"c6rX7Fvui7pwdsUKi5yLw","data":[],"key":"yiMEUyCRAd"}],"data":{},"key":"L19rpkPDt7"},{"type":"block","children":[],"key":"Pp0gYWxX2w"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"assert( abs( expPrecision(5, epsilon) - 148.413159102 ) < 50*epsilon )","key":"ZURjMvnWhq"},{"type":"output","id":"dJI-UgYE-xgvZNB9pOitP","data":[],"key":"r7eXNGWYL3"}],"data":{},"key":"pJcWM0UBAg"},{"type":"block","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"children":[{"type":"text","value":"Comparez vos résultats avec la fonction ","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"DmUnxx9ky3"},{"type":"inlineCode","value":"exp","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"lsJ1LRJGP6"},{"type":"text","value":" de python :","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"o9yWFS0e2n"}],"key":"VYJjOj9a7K"}],"data":{"nbgrader":{"grade":false,"grade_id":"cell-f14c9177d33e54ce","locked":true,"points":1,"schema_version":3,"solution":false,"task":true}},"key":"Ilc3hv5SCK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import math\n\nmath.exp(5)","key":"TEBRxfIqTe"},{"type":"output","id":"JJSPgB10SVXH-dWv0Zjzi","data":[],"key":"YqyXkDbXxH"}],"data":{},"key":"GUepS68tKV"},{"type":"block","children":[],"key":"OXWGPxO5Ha"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"math.exp(3)","key":"maipOoVcC3"},{"type":"output","id":"2GG7_KXhrDVJFztg637i0","data":[],"key":"dPcUaak4hK"}],"data":{},"key":"Bj4OLkYw5b"},{"type":"block","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":225,"column":1},"end":{"line":225,"column":1}},"children":[{"type":"text","value":"Bilan de la partie 4","position":{"start":{"line":225,"column":1},"end":{"line":225,"column":1}},"key":"KKyKawKKHG"}],"identifier":"bilan-de-la-partie-4","label":"Bilan de la partie 4","html_id":"bilan-de-la-partie-4","implicit":true,"key":"j0zM3EeOwN"},{"type":"paragraph","position":{"start":{"line":227,"column":1},"end":{"line":229,"column":1}},"children":[{"type":"text","value":"Très bien, vous avez implanté le calcul de la fonction exponentielle à\nprécision fixée. Maintenant étudions sa performance en calculant son\ntemps d’exécution :","position":{"start":{"line":227,"column":1},"end":{"line":227,"column":1}},"key":"Vau6jFMYZ4"}],"key":"HHHNNsHJhZ"}],"data":{"nbgrader":{"grade":false,"grade_id":"cell-9b25311fb953a3d7","locked":true,"schema_version":3,"solution":false}},"key":"GBsjSGsVaK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import time\nstart = time.time()\nexpPrecision(10, 0.00000001)\nprint(time.time() - start)","key":"zAwoPOiLZN"},{"type":"output","id":"7mXJrcschRVVxHJqr_TdW","data":[],"key":"azSdx3SFP3"}],"data":{},"key":"UP84iYnNr4"},{"type":"block","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":242,"column":1},"end":{"line":243,"column":1}},"children":[{"type":"text","value":"Dans la ","position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"key":"rj4tq8ugFg"},{"type":"link","url":"/sources/fonctions/exponentielle5","position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"children":[{"type":"text","value":"partie 5","position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"key":"D7Tizw8UyH"}],"urlSource":"02-exponentielle5.md","dataUrl":"/sources.fonctions.exponentielle5.json","internal":true,"protocol":"file","key":"JEaMQVQjtO"},{"type":"text","value":", vous tenterez d’optimiser\ncette implantation.","position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"key":"RLrhfOItTQ"}],"key":"TJ3uPDkBwN"}],"data":{"nbgrader":{"grade":false,"grade_id":"cell-44bb7d35a9655256","locked":true,"schema_version":3,"solution":false}},"key":"Gb4l2gGBfy"}],"key":"vQfwPPatP7"},"references":{"cite":{"order":[],"data":{}}}}